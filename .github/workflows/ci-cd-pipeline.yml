name: Python DOCX Style Architect CI/CD

on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main

jobs:
  ci-check-and-build:
    name: CI - Setup, Install, and Test
    runs-on: ubuntu-latest

    steps:
      - name: 1. Checkout code
        uses: actions/checkout@v4 # Скачивает ваш код

      - name: 2. Setup Python environment
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      - name: 3. Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install python-docx

      - name: 4. Run tests or basic check
        run: |
          echo "No formal tests found. Proceeding with static code check."

      - name: 5. Upload Python Source Code Artifact
        uses: actions/upload-artifact@v4
        with:
          name: style-architect-source
          path: .
          ignore-paths: |
            .git/
            .github/
            __pycache__/


  cd-deploy:
    name: CD - Deployment Placeholder
    runs-on: ubuntu-latest
    

    needs: ci-check-and-build 

    if: github.ref == 'refs/heads/main' 

    steps:
      - name: 1. Download Artifact
        uses: actions/download-artifact@v4
        with:
          name: style-architect-source
          path: ./app 

      - name: 2. Deployment (Placeholder)
        run: |
          echo "Deployment steps go here."
          echo "Example: SSH into server and copy files, or deploy to a cloud function."
